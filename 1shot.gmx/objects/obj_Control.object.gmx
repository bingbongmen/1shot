<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>&lt;undefined&gt;</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>0</depth>
  <persistent>-1</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>//Variable inits
globalvar gameStart, p1Point, p2Point, player1Shot, player2Shot, player1Ready, player2Ready levelNumber, p1Score, didP1Score, p2Score, didP2Score, menuOption, pointsToWin, lightingOn;
player1Shot = 0;
player2Shot = 0;
player1Ready = 0;
player2Ready = 0;
p1Point = 0;
p2Point = 0;
p1Score = 0;
didP1Score = 0;
p2Score = 0;
didP2Score = 0;
levelNumber = 0;
gameStart = 0;
menuOption = 0;
minMenuOptions = 0; //always 0
maxMenuOptions = 6;
pointsToWin = 3;
lightingOn = 0;

//Deadzone (if it works)
if gamepad_is_connected(0) gamepad_set_axis_deadzone(0, 0.25);
if gamepad_is_connected(1) gamepad_set_axis_deadzone(1, 0.25);



</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="1">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if((player1Ready = 1) &amp;&amp; (player2Ready = 1)){
    levelNumber = 1;
    room_goto(rm_Level1);
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if((player1Ready = 1) &amp;&amp; (player2Ready = 1)){
    instance_create(x,y,obj_levelRules);
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>//init
if(room = rm_Create){
    room_goto(rm_Lobby);
}
//player win check and treating
if(levelNumber != 0){
    if((p1Score &gt;= pointsToWin) &amp;&amp; ((gamepad_button_check_pressed(0, gp_shoulderrb)) || (gamepad_button_check_pressed(0, gp_shoulderlb)))){
        p1Score = 0;
        p2Score = 0;
        levelNumber = 0;
        room_goto(rm_Lobby);        
    }
    if((p2Score &gt;= pointsToWin) &amp;&amp; ((gamepad_button_check_pressed(1, gp_shoulderrb)) || (gamepad_button_check_pressed(1, gp_shoulderlb)))){
        p1Score = 0;
        p2Score = 0;
        levelNumber = 0;
        room_goto(rm_Lobby);
    }
}
//Menu button selection var
if(levelNumber = 0){
    //option selects
    if((gamepad_button_check_pressed(0, gp_padd)) || (gamepad_button_check_pressed(1, gp_padd))){
        menuOption += 2;
        if(menuOption &gt; maxMenuOptions){
            menuOption = maxMenuOptions;
        }
    }
    if((gamepad_button_check_pressed(0, gp_padu)) || (gamepad_button_check_pressed(1, gp_padu))){
        menuOption -= 2;
        if(menuOption &lt; minMenuOptions){
            menuOption = minMenuOptions;
        }
        
    }
    if((gamepad_button_check_pressed(0, gp_padl)) || (gamepad_button_check_pressed(1, gp_padl))){
        if(menuOption % 2 = 0){
            menuOption -= 1;
        }
        if(menuOption &lt; minMenuOptions){
            menuOption = minMenuOptions;
        }
        
        if(menuOption = 1){
            pointsToWin -= 1;
            if(pointsToWin &lt;= 0){
                pointsToWin = 1;
            }
        }
        if(menuOption = 5){
            if(instance_exists(obj_Lighting)){
            with(obj_Lighting){
                instance_destroy();
            }
            }
            lightingOn = 0;
        }
    }
    if((gamepad_button_check_pressed(0, gp_padr)) || (gamepad_button_check_pressed(1, gp_padr))){
        if(menuOption % 2 = 1){
            menuOption += 1;
        }
        if(menuOption &gt; maxMenuOptions){
               menuOption = maxMenuOptions;
        }
        if(menuOption = 2){
            pointsToWin += 1;
        }
        if(menuOption = 6){
            if(!instance_exists(obj_Lighting)){
                instance_create(0,0,obj_Lighting);
        }
            lightingOn = 1;
        }
    }
    //change vars
    if((gamepad_button_check_pressed(0, gp_face3)) || (gamepad_button_check_pressed(1, gp_face3))){
        //points to win
        if(menuOption = 1){
            pointsToWin--;
            if(pointsToWin &lt;= 0){
                pointsToWin = 1;
            }
        }
        if(menuOption = 2){
            pointsToWin++;
        }
    }
}

//Menu ready check
if(levelNumber = 0){
    if(gamepad_button_check_pressed(0, gp_face1)){
        player1Ready = 1;
    }
    if(gamepad_button_check_pressed(0, gp_face2)){
        player1Ready = 0;
    }
    if(gamepad_button_check_pressed(1, gp_face1)){
        player2Ready = 1;
    }
    if(gamepad_button_check_pressed(1, gp_face2)){
        player2Ready = 0;
    }
    if((player1Ready = 1) &amp;&amp; (player2Ready = 1)){
        if(alarm[1]=-1){
        alarm[1]=75;
        }
    }
}

//Sets round to end if both players out of ammo and all shots completed
if((player1Shot&lt;=0) &amp;&amp; (player2Shot&lt;=0) &amp;&amp; (instance_number(obj_p1Bullet)=0) &amp;&amp; (instance_number(obj_p2Bullet)=0) &amp;&amp; (gameStart = 1)){
    player1Ready = 0;
    player2Ready = 0;
    gameStart = 0;
}

//Ready Check if round is over
if(gameStart = 0){

    if(gamepad_button_check_pressed(0, gp_face1)){
        player1Ready = 1;
    }
    
    if(gamepad_button_check_pressed(0, gp_face2)){
        player1Ready = 0;
    }
    
    if(gamepad_button_check_pressed(1, gp_face1)){
        player2Ready = 1;
    }
    
    if(gamepad_button_check_pressed(1, gp_face2)){
        player2Ready = 0;
    }
    
    if((player1Ready = 1) &amp;&amp; (player2Ready = 1)){
        if(alarm[0]=-1){
        alarm[0]=75;
        }
    }
}

//Fullscreen 
if ((gamepad_button_check_pressed(0, gp_select)) || gamepad_button_check_pressed(1, gp_select))
{
    if window_get_fullscreen(){
        window_set_fullscreen(false);
    }
    else{
        window_set_fullscreen(true);
    }
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>//Draw score
//draw_set_colour(c_blue);
//draw_text(obj_Player1.x-6,obj_Player1.y-50,string(p1Score));
//draw_text(obj_Player2.x-6,obj_Player2.y-50,string(p2Score));

//Player ammo draws
if(player1Shot = 1){
draw_set_colour(c_red);
draw_circle(obj_Player1.x-1, obj_Player1.y-2, 18, 1);
}

if(player2Shot = 1){
draw_set_colour(c_red);
draw_circle(obj_Player2.x-1, obj_Player2.y-2, 18, 1);
}

//Player ready displays
if(gameStart = 0){
    if(levelNumber = 0){
        if(player1Ready = 0){
            draw_set_alpha(0.15);
            draw_set_color(c_red);
            draw_rectangle(736,32,992,288,0);
            draw_set_alpha(1);
        }
        if(player1Ready != 0){
            draw_set_alpha(0.15);
            draw_set_color(c_green);
            draw_rectangle(736,32,992,288,0);
            draw_set_alpha(1);
        }
       
        if(player2Ready = 0){
            draw_set_alpha(0.15);
            draw_set_color(c_red);
            draw_rectangle(736,736,992,992,0);
            draw_set_alpha(1);
        }
        if(player2Ready != 0){
            draw_set_alpha(0.15);
            draw_set_color(c_green);
            draw_rectangle(736,736,992,992,0);
            draw_set_alpha(1);
        }
    }
    else{
        
        if(player1Ready = 0){
            draw_set_alpha(0.3);
            draw_set_color(c_red);
            draw_rectangle(0,0,room_width/2,room_height,0);
            draw_set_alpha(1);
           //draw_sprite(spr_notReady,0,(room_width/4),room_height/2)
        }
        if(player1Ready != 0){
            draw_set_alpha(0.3);
            draw_set_color(c_green);
            draw_rectangle(0,0,room_width/2,room_height,0);
            draw_set_alpha(1);
            //draw_sprite(spr_Ready,0,(room_width/4),room_height/2)
        }
       
        if(player2Ready = 0){
            draw_set_alpha(0.3);
            draw_set_color(c_red);
            draw_rectangle((room_width/2)+1,0,room_width,room_height,0);
            draw_set_alpha(1);
            //draw_sprite(spr_notReady,0,(room_width/4)*3,room_height/2)
        }
        if(player2Ready != 0){
            draw_set_alpha(0.3);
            draw_set_color(c_green);
            draw_rectangle((room_width/2)+1,0,room_width,room_height,0);
            draw_set_alpha(1);
            //draw_sprite(spr_Ready,0,(room_width/4)*3,room_height/2)
        }
        draw_sprite(spr_P1,0,(room_width/4),(room_height/5)-25);
        draw_sprite(spr_P2,0,(room_width/4)*3,(room_height/5)-25);
        if(didP1Score = 1){
            var drawP1Score = asset_get_index("spr_" + string(p1Score));
            draw_sprite_ext(drawP1Score,0,(room_width/4),room_height/2,1,1,0,c_yellow,1);
            var drawP2Score = asset_get_index("spr_" + string(p2Score));
            draw_sprite(drawP2Score,0,(room_width/4)*3,room_height/2);
            
        }
        else if(didP2Score = 1){
            var drawP1Score = asset_get_index("spr_" + string(p1Score));
            draw_sprite(drawP1Score,0,(room_width/4),room_height/2);
            var drawP2Score = asset_get_index("spr_" + string(p2Score));
            draw_sprite_ext(drawP2Score,0,(room_width/4)*3,room_height/2,1,1,0,c_yellow,1);
        }
        else{
            var drawP1Score = asset_get_index("spr_" + string(p1Score));
            draw_sprite(drawP1Score,0,(room_width/4),room_height/2);
            var drawP2Score = asset_get_index("spr_" + string(p2Score));
            draw_sprite(drawP2Score,0,(room_width/4)*3,room_height/2);
        }
    }   
}

//Draw menu and options
if(levelNumber = 0){
    draw_set_color(c_black);
    draw_sprite(spr_arrowLeft,0,64,128);
    draw_text(166,80,"Points To Win");
    draw_text(216, 144,string(pointsToWin));
    draw_sprite(spr_arrowRight,0,320,128);
    draw_sprite(spr_arrowLeft,0,64,320);
    draw_sprite(spr_arrowRight,0,320,320);
    draw_sprite(spr_arrowLeft,0,64,512);
    draw_text(166,464,"Lighting");
    draw_text(216, 528,string(lightingOn));
    draw_sprite(spr_arrowRight,0,320,512);
    
    if(menuOption = 1){
        draw_sprite(spr_arrowLeftS,0,64,128);
    }
    if(menuOption = 2){
        draw_sprite(spr_arrowRightS,0,320,128);
    }
    if(menuOption = 3){
        draw_sprite(spr_arrowLeftS,0,64,320);
    }
    if(menuOption = 4){
        draw_sprite(spr_arrowRightS,0,320,320);
    }
    if(menuOption = 5){
        draw_sprite(spr_arrowLeftS,0,64,512);
    }
    if(menuOption = 6){
        draw_sprite(spr_arrowRightS,0,320,512);
    }
}

//Draw Winner text
if(room != rm_Lobby){
    if(p1Score &gt;= pointsToWin){
        draw_text(obj_Player1.x-40,obj_Player1.y+80,"P1 WINS");
        draw_text(obj_Player1.x-170,obj_Player1.y+100,"Press shoulder button to leave");
    }
    if(p2Score &gt;= pointsToWin){
        draw_text(obj_Player2.x-40,obj_Player2.y+80,"P2 WINS");
        draw_text(obj_Player2.x-175,obj_Player2.y+100,"Press shoulder button to leave");
    }
}

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="9" enumb="32">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>player1Ready = 1;
player2Ready = 1;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="9" enumb="13">
      <action>
        <libid>1</libid>
        <id>201</id>
        <kind>0</kind>
        <userelative>-1</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>1</exetype>
        <functionname>action_create_object</functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>10</kind>
            <object>obj_levelRules</object>
          </argument>
          <argument>
            <kind>0</kind>
            <string>0</string>
          </argument>
          <argument>
            <kind>0</kind>
            <string>0</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
